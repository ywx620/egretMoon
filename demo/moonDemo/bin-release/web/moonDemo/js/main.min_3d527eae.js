var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{h(o.next(t))}catch(e){r(e)}}function a(t){try{h(o["throw"](t))}catch(e){r(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,a)}h((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(o){i=[6,o],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},TextField=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Shape=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Shape);__reflect(Shape.prototype,"Shape");var DisplayObject=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var DisplayObjectContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DisplayObjectContainer.prototype,"DisplayObjectContainer");var Point=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point");var Rectangle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var Bitmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var BitmapData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.BitmapData);__reflect(BitmapData.prototype,"BitmapData");var Stage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Stage);__reflect(Stage.prototype,"Stage");var Tween=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Tween);__reflect(Tween.prototype,"Tween");var Ease=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Ease);__reflect(Ease.prototype,"Ease");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",o=0;o<t.length;o++)i+=t[o]+",";i=i.substr(0,i.length-1),moon.LogManager.getIns().logMessage(i)},traceSimple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",o=0;o<t.length;o++)i+=t[o]+",";i=i.substr(0,i.length-1),moon.LogManager.getIns().log(i)},alertAuto=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=3),moon.AlertManager.getIns().alertAuto(t,e)},alertHand=function(t){void 0===t&&(t="提示或警告"),moon.AlertManager.getIns().alert(t)},alertRoll=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=200),moon.AlertManager.getIns().alertRoll(t,e)},moon;!function(t){var e=function(){function t(){}return t.fontName="黑体",t}();t.FONT=e,__reflect(e.prototype,"moon.FONT");var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t.VER_DEBUG="debug",t.VER_RELEASE="release",t}();t.Const=i,__reflect(i.prototype,"moon.Const");var o=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"white",{get:function(){return 16777215},enumerable:!0,configurable:!0}),Object.defineProperty(t,"black",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gray",{get:function(){return 6710886},enumerable:!0,configurable:!0}),Object.defineProperty(t,"red",{get:function(){return 16711680},enumerable:!0,configurable:!0}),Object.defineProperty(t,"green",{get:function(){return 65280},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bule",{get:function(){return 255},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinNormal",{get:function(){return 1382684},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinDown",{get:function(){return 10066329},enumerable:!0,configurable:!0}),Object.defineProperty(t,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),t.getRandomArray=function(t){for(var e=[],i=0;t>i;i++)e.push(16777215*Math.random());return e},t.lightenDarkenColor=function(t,e){var i=(t>>16)+e;i>255?i=255:0>i&&(i=0);var o=(t>>8&255)+e;o>255?o=255:0>o&&(o=0);var n=(255&t)+e;return n>255?n=255:0>n&&(n=0),n|o<<8|i<<16},t}();t.Color=o,__reflect(o.prototype,"moon.Color");var n=function(){function e(){}return Object.defineProperty(e,"randomRect",{get:function(){return t.MoonUI.getRect(60,60,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"randomCircle",{get:function(){return t.MoonUI.getCircle(50,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointNormal",{get:function(){return t.MoonUI.getCircle(6,t.Color.black)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointDown",{get:function(){return t.MoonUI.getCircle(6,t.Color.gray)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonNormal",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonDown",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOff",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOn",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOff",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOn",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOff",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOn",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressBackground",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressValue",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBackground",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderValue",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBar",{get:function(){return t.MoonUI.getCircle(15,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scrollBar",{get:function(){return t.MoonUI.getRect(10,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),e.getRodatioButton=function(e){var i=new y(t.Skin.radioOff,t.Skin.radioOn);return i.skinAutoScale=!1,i.label=e,i.labelColor=t.Color.black,i.setLabelPoint(40,0),i},e.getCheckBox=function(e){var i=[t.Skin.checkBoxOff,t.Skin.checkBoxOff,t.Skin.checkBoxOn,t.Skin.checkBoxOn],o=new t.MoreSkinButton(i);return o.skinAutoScale=!1,o.label=e,o.toggleSwitch=!0,o.labelColor=t.Color.black,o.setLabelPoint(50,2),o},e}();t.Skin=n,__reflect(n.prototype,"moon.Skin");var r=function(){function t(){}return t.displayRank=function(t,e,i,o,n,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=n+Math.floor(h%e)*(a.width+i)*s,a.y=r+Math.floor(h/e)*(a.height+o)*s},t}();t.SimpleLayout=r,__reflect(r.prototype,"moon.SimpleLayout");var s=function(){function e(){}return Object.defineProperty(e,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),e.getLineRect=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=1),void 0===n&&(n=0),void 0===r&&(r=0);var s=new Sprite;return s.graphics.lineStyle(o,i),s.graphics.drawRect(n,r,t,e),s.graphics.endFill(),s},e.getLineCircle=function(t,e,i,o,n){void 0===e&&(e=0),void 0===i&&(i=1),void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.lineStyle(i,e),r.graphics.drawCircle(o,n,t),r.graphics.endFill(),r},e.getMatrixRect=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite,s=new egret.Matrix;return s.createGradientBox(t,e,Math.PI*n,0,0),r.graphics.beginGradientFill(egret.GradientType.LINEAR,[i,o],[1,1],[0,255],s),r.graphics.drawRect(0,0,t,e),r.graphics.endFill(),r},e.getRect=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(o,n,t,e),r.graphics.endFill(),r},e.getRectAndX=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=this.getRect(t,e,i,o,n);return r.addChild(this.getX(t,e,i,1,o,n)),r},e.getX=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=1),void 0===n&&(n=0),void 0===r&&(r=0);var s=new Sprite,a=new Sprite;a.graphics.lineStyle(o,i),a.graphics.moveTo(0,0),a.graphics.lineTo(t,e);var h=new Sprite;return h.graphics.lineStyle(o,i),h.graphics.moveTo(t,0),h.graphics.lineTo(0,e),s.addChild(a),s.addChild(h),s},e.getRoundRect=function(t,e,i,o,n,r,s){void 0===i&&(i=0),void 0===o&&(o=5),void 0===n&&(n=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new Sprite;return a.graphics.beginFill(i),a.graphics.drawRoundRect(r,s,t,e,o,n),a.graphics.endFill(),a},e.getCircle=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0);var n=new Sprite;return n.graphics.beginFill(e),n.graphics.drawCircle(i,o,t),n.graphics.endFill(),n},e.getPolygon=function(t,e,i,o){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===o&&(o=0);var n=new Sprite;n.rotation=o,n.graphics.beginFill(i);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?n.graphics.moveTo(s,a):n.graphics.lineTo(s,a)}return n.graphics.endFill(),n},e.getArrowRoundRect=function(t,e,i,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite;r.addChild(this.getRoundRect(t,e,i));var s=this.getPolygon(3,t/3,o,30+n);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},e.getScrollLineBar=function(t,e,i){for(var o=new Sprite,n=e/3,r=0;3>r;r++){var s=this.getRect(t,1,i,0,r*n);o.addChild(s)}return o},e.getAddRoundRect=function(t,e,i){var o=new Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return o.addChild(n),o.addChild(r),o},e.getRemoveRoundRect=function(t,e,i){var o=new Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1);return o.addChild(n),o},e.getRoundRectText=function(t,e,i,o){void 0===o&&(o="click");var n=new Sprite;n.addChild(this.getRoundRect(t,e,i));var r=new TextField;return r.name="text",r.text=o,r.x=n.width-r.width>>1,r.y=n.height-r.height>>1,n.addChild(r),n},e.getSwitch=function(e,i,o){void 0===e&&(e=16777215),void 0===i&&(i=0),void 0===o&&(o=0);var n=t.MoonUI.getRoundRect(80,50,e,60,60);return n.addChild(t.MoonUI.getCircle(22,i,0==o?25:55,25)),n},e.getCheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new Sprite;if(o.addChild(this.getRect(40,40,t)),1==i){var n=new Sprite;n.graphics.beginFill(e),n.graphics.moveTo(0,20),n.graphics.lineTo(20,36),n.graphics.lineTo(44,8),n.graphics.lineTo(36,0),n.graphics.lineTo(20,18),n.graphics.lineTo(12,8),n.graphics.lineTo(0,20),o.addChild(n)}return o},e.getRadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new Sprite;if(o.addChild(this.getCircle(16,t,16,16)),o.graphics.lineStyle(1,0),1==i){var n=this.getCircle(8,e,16,16);o.addChild(n)}return o},e.getGridding=function(t,e){void 0===e&&(e=0);var i=new Sprite;i.graphics.lineStyle(.1,e);for(var o=t.width/t.x,n=t.height/t.y,r=0;r<t.x;r++)i.graphics.moveTo(0,r*n),i.graphics.lineTo(t.width,r*n);for(r=0;r<t.y;r++)i.graphics.moveTo(r*o,0),i.graphics.lineTo(r*o,t.height);return i},e.getHeart=function(t,e){void 0===t&&(t=15),void 0===e&&(e=16711680);var i=new Sprite;return i.graphics.beginFill(e),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(t,2.5*-t,2*t,1.5*-t,0,0),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(-t,2.5*-t,2*-t,1.5*-t,0,0),i.graphics.endFill(),i.anchorOffsetX=-i.width/2,i.anchorOffsetY=-i.height,i},e}();t.MoonUI=s,__reflect(s.prototype,"moon.MoonUI");var a=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=(new v).textField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e;var e=(new v).textField;e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.log=function(t){P.version==i.VER_DEBUG&&(this.txtSimple.text=t)},t.prototype.logMessage=function(t){P.version==i.VER_DEBUG&&this.txtMessage.appendText(t+"\n")},t.prototype.setLogColor=function(t){this.txtSimple.textColor=t},t.prototype.setLogMessageColor=function(t){this.txtMessage.textColor=t},t}();t.LogManager=a,__reflect(a.prototype,"moon.LogManager");var h=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){this.stage=t},t.prototype.alertAuto=function(t,e){void 0===t&&(t="自动关闭的提示或警告"),void 0===e&&(e=3);var i=new k(t,e);return this.stage?this.stage.addChild(i):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),i},t.prototype.alert=function(t){void 0===t&&(t="手动关闭的提示或警告");var e=new B(t);return this.stage?this.stage.addChild(e):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),e},t.prototype.alertRoll=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=200);var i=new I(t,e);return this.stage?this.stage.addChild(i):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),i},t}();t.AlertManager=h,__reflect(h.prototype,"moon.AlertManager");var c=function(){function e(){this.bgName="tips_png"}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,i){null==this.tipsView&&(this.tipsView=new t.BasicTips(this.bgName),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.y=t.y),this.tipsView.y+this.tipsView.height>this.stage.stageHeight&&(this.tipsView.y=t.y-(this.tipsView.height+50)),this.tipsView.x<0&&(this.tipsView.x=t.x+50),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50)))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=c,__reflect(c.prototype,"moon.TipsManager");var l=function(t){function e(e,i,o){void 0===e&&(e=""),void 0===i&&(i=null),void 0===o&&(o=null);var n=t.call(this)||this;return n.type=e,n.data=i,n.currentTarget=o,n}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_MOVE="event-move",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.RENDER_COMPLETE="render complete",e.UPDATE="update",e.START="start",e.MOVE="move",e.OVER="over",e.PAUSE="pause",e.STOP="stop",e.PLAY="play",e.OPEN="open",e.CLOSE="close",e}(egret.EventDispatcher);t.MoonEvent=l,__reflect(l.prototype,"moon.MoonEvent");var u=function(t){function e(){var e=t.call(this)||this;return e._type=i.SHAPE_RECT,e._color=0,e.display=new Sprite,e.bg=new Sprite,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},e.prototype.setPosition=function(){this._hasBg&&this.type!=i.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},e.prototype.setBackground=function(t,e){void 0===e&&(e=1),this._hasBg=!0;var i=this._data,o={};for(var n in i)o[n]=i[n];o.c=t,o.w&&(o.w=o.w+2*e),o.h&&(o.h=o.h+2*e),o.r&&(o.r=o.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(o),this.addChildAt(this.bg,0),this.setPosition()},e.prototype.getDisplay=function(t){switch(this.type){case i.SHAPE_RECT:return s.getRect(t.w,t.h,t.c);case i.SHAPE_RECT_ROUND:return s.getRoundRect(t.w,t.h,t.c,t.ew,t.eh);case i.SHAPE_CIRCLE:return s.getCircle(t.r,t.c)}},e}(Sprite);t.MoonDisplayObject=u,__reflect(u.prototype,"moon.MoonDisplayObject");var p=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.dispEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var o=this.dataEvent[t];if(null!=o){var n=new l;n.currentTarget=this,n.data=e,n.type=t,n.dataType=i,o["this"]?o.apply(o["this"],[n]):o(n)}}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=i,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildAll=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=2147483647),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var o=t;e>=o;++o)this.removeChildIndex(t,i)},e.prototype.removeChildIndex=function(t,i){if(t>=0||t<this.numChildren){var o=this.getChildAt(t);if(o instanceof e)o.removeFromParent(i);else{var n=this.getChildAt(t);n.parent&&n.parent.removeChild(n)}}},e.prototype.dispose=function(){this.removeChildAll(0,-1,!0),this.dataEvent=null,this.stageWidth=null,this.stageHeight=null},e}(DisplayObjectContainer);t.MoonContainer=p,__reflect(p.prototype,"moon.MoonContainer");var d=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createText=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="");var o=(new v).textField;return o.x=t,o.y=e,o.text=i,this.addChild(o),o},i.prototype.createRect=function(e,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0);var s=t.MoonUI.getRect(e,i,o,n,r);return this.addChild(s),s},i.prototype.createCircle=function(e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=t.MoonUI.getCircle(e,i,o,n);return this.addChild(r),r},i.prototype.createRectBySprite=function(t,e,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),t.graphics.clear(),t.graphics.beginFill(o),t.graphics.drawRect(n,r,e,i),t.graphics.endFill()},i.prototype.createBackground=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var i=this.createRect(this.stageWidth,this.stageHeight,t);return i.alpha=e,i.touchEnabled=!0,i},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=96963),void 0===e&&(e=14540253);var i=this.stageWidth,o=this.stageHeight,n=new egret.Matrix;n.createGradientBox(i,o,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.LINEAR,[t,e],[1,1],[0,255],n),r.graphics.drawRect(0,0,i,o),this.addChild(r),r},i}(p);t.BasicView=d,__reflect(d.prototype,"moon.BasicView");var g=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.play=function(){this.stop(),this.isPlay=!0,egret.startTick(this.loop,this)},i.prototype.stop=function(){this.isPlay=!1,egret.stopTick(this.loop,this)},i.prototype.loop=function(t){return traceSimple(t),!0},i.prototype.createButton=function(e,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var n=new t.BasicButton;return n.label=e,n.x=i,n.y=o,this.addChild(n),n},i}(d);t.GameView=g,__reflect(g.prototype,"moon.GameView");var m=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this)||this;return RES.hasRes(e)?(o.texture=RES.getRes(e),o.scale9Grid=i||new Rectangle(8,8,2,2)):egret.error("找不到资源："+e),o}return __extends(e,t),e}(Bitmap);t.Scale9Image=m,__reflect(m.prototype,"moon.Scale9Image");var f=function(t){function e(e){var i=t.call(this)||this;return i.side=14,i.lineSpacing=4,i.image=new m(e),i.addChild(i.image),i.text=(new v).textField,i.text.textAlign=egret.HorizontalAlign.CENTER,i.text.verticalAlign=egret.VerticalAlign.MIDDLE,i.text.lineSpacing=i.lineSpacing,i.addChild(i.text),i}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,i=this.side,o=e.width+i,n=e.height+i;t.width=o,t.height=n,e.x=e.y=i>>1},e}(p);t.BasicTips=f,__reflect(f.prototype,"moon.BasicTips");var v=function(e){function i(i,o){void 0===i&&(i=""),void 0===o&&(o=16777215);var n=e.call(this)||this;return n.text=new TextField,n.text.textAlign=egret.HorizontalAlign.LEFT,n.text.verticalAlign=egret.VerticalAlign.MIDDLE,n.text.text=i,n.text.textColor=o,n.text.fontFamily=t.FONT.fontName,n.addChild(n.text),n}return __extends(i,e),Object.defineProperty(i.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),i}(p);t.Label=v,__reflect(v.prototype,"moon.Label");var y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this;return o.skinAutoScale=!0,o.statusNormal=e||n.buttonNormal,o.statusDown=i||n.buttonDown,o.skinContainer=new DisplayObjectContainer,o.addChild(o.skinContainer),o.updateSkin(o.statusNormal),o.text=(new v).textField,o.addChild(o.text),o.open(),o}return __extends(e,t),e.prototype.open=function(){this.close(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.close=function(){this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.setLabelPoint=function(t,e){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=t,this.text.y=e},Object.defineProperty(e.prototype,"labelCircle",{set:function(t){this.text.text=t,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelColor",{set:function(t){this.text.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.text.text},set:function(t){this.text.text=t;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setSkinSize(),this.setTextPosition()},e.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},e.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal))},Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),e.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var t=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=t;var e=this.textHeight;e>=this.statusNormal.height&&(t=e/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=t)}},e.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},e.prototype.updateSkin=function(t){this.skinContainer.removeChildren(),this.skinContainer.addChild(t)},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e}(p);t.BasicButton=y,__reflect(y.prototype,"moon.BasicButton",["moon.IOnoff"]);var w=function(t){function e(e){var i=t.call(this,e[0],e[1])||this;return i._currentPage=0,i.skins=e,i}return __extends(e,t),e.prototype.updatePage=function(t){this.currentPage=t,this.setSkinNormal()},Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){t=2*t==this.skins.length?0:t,this._currentPage=t,this.statusNormal=this.skins[2*t],this.statusDown=this.skins[2*t+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleSwitch",{set:function(t){this._toggleSwitch=t},enumerable:!0,configurable:!0}),e.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),t.prototype.onTouch.call(this,e)},e}(y);t.MoreSkinButton=w,__reflect(w.prototype,"moon.MoreSkinButton");var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1)},e.prototype.hasItem=function(t){return this.items.length>0&&t>=0&&t<this.items.length},e.prototype.getItem=function(t){return this.items[t]},e.prototype.getNextItem=function(){return this.items[this.index++]},e.prototype.reset=function(){this.index=0},e.prototype.update=function(){},e.prototype.dispose=function(){for(this.reset();this.hasItem(this.index);){var t=this.getItem(this.index);this.removeItem(t),t instanceof p&&t.removeFromParent(!0)}},e}(d);t.BasicBar=C,__reflect(C.prototype,"moon.BasicBar",["moon.IItem"]);var _=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this;return o._value=0,o.setSkin(e,i),o.addChild(o.skinBg),o.addChild(o.skinValue),o.text=(new v).textField,o.addChild(o.text),o}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.progressBackground,this.skinValue=e||n.progressValue},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t},enumerable:!0,configurable:!0}),e.prototype.showText=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.text.text=t,-1==e?this.text.x=this.skinBg.width-this.text.width>>1:this.text.x=e,-1==i?this.text.y=this.skinBg.height+5:this.text.y=i},e}(p);t.ProgressBar=_,__reflect(_.prototype,"moon.ProgressBar");var x=function(t){function e(e,i,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null);var r=t.call(this,e,i)||this;return r.skinBar=o||n.sliderBar,r.addChild(r.skinBar),r.skinBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouch,r),r.skinBar.touchEnabled=!0,r.layout(),r.value=1,r}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.sliderBackground,this.skinValue=e||n.sliderValue},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(l.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY),this.dispEvent(l.MOVE);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(l.OVER)}},e.prototype.moveDo=function(t,e){var o,n=this.globalToLocal(t,e);o=this.type==i.HORIZONTAL?n.x/this.skinValue.width:-n.y/this.skinValue.width,this.value=o},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t,this.type==i.HORIZONTAL?this.skinBar.x=this.skinValue.width*t:this.skinBar.y=-this.skinValue.width*t},enumerable:!0,configurable:!0}),e.prototype.layout=function(t,e){if(void 0===t&&(t=i.HORIZONTAL),void 0===e&&(e=0),this.type=t,t==i.VERTICAL){var o=-90;this.skinBar.x=this.skinValue.height>>1}else{var o=0;this.skinBar.y=this.skinValue.height>>1}this.skinBg.rotation=o,this.skinValue.rotation=o},e}(_);t.SliderBar=x,__reflect(x.prototype,"moon.SliderBar",["moon.ILayout"]);var b=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.skinBar=e||n.scrollBar,i.skinBar.alpha=0,i.addChild(i.skinBar),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i.touchEnabled=!0,i.startPos=new Point,i.stPos=new Point,i.setSize(),i.layout(),i}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stPos.x=t.stageX,this.stPos.y=t.stageY,this.startPos.x=t.stageX-this._target.x,this.startPos.y=t.stageY-this._target.y,this.hideShow(1),this.startTime=egret.getTimer();
break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.hideShow(0,100),this.timeMove(t.stageX,t.stageY)}},e.prototype.timeMove=function(t,e){var o=egret.getTimer()-this.startTime;if(500>o){var n=this._target,r=this.maskRect;Tween.removeTweens(n);var s=t-this.stPos.x,a=e-this.stPos.y,h=Math.sqrt(s*s+a*a),c=h/o*100,l=Tween.get(n);if(this.type==i.VERTICAL){var u=a>0?1:-1;c*=u;var p=n.y+c;p>0&&n.y+c>0&&(p=0),0>p&&n.y+c<r.height-n.height&&(p=r.height-n.height),l.to({y:p},400,Ease.sineOut).call(this.setBarPos,this)}else{var u=s>0?1:-1;c*=u;var d=n.x+c;d>0&&n.x+c>0&&(d=0),0>d&&n.x+c<r.width-n.width&&(d=r.width-n.width),l.to({x:d},400,Ease.sineOut).call(this.setBarPos,this)}}},e.prototype.setBarPos=function(){this.type==i.VERTICAL?this.skinBar.y=-this._target.y/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height):this.skinBar.x=-this._target.x/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width)},e.prototype.hideShow=function(t,e){void 0===e&&(e=1e3),Tween.removeTweens(this.skinBar),1==t&&(this.skinBar.alpha=1);var i=Tween.get(this.skinBar);i.to({alpha:t},e)},e.prototype.moveDo=function(t,e){this.type==i.VERTICAL?this.canMoveY(e):this.type==i.HORIZONTAL&&this.canMoveX(t)},e.prototype.canMoveX=function(t){var e=this.maskRect.width-this._target.width,i=t-this.startPos.x;i>e&&0>i&&(this._target.x=i,this.skinBar.x=-i/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width))},e.prototype.canMoveY=function(t){var e=this.maskRect.height-this._target.height,i=t-this.startPos.y;i>e&&0>i&&(this._target.y=i,this.skinBar.y=-i/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height))},e.prototype.setMask=function(){null!=this.maskRect&&null!=this._target&&(this._target.mask=this.maskRect)},e.prototype.setSkinBarPos=function(){this.skinBar.x=this.skinBar.y=0,this.type==i.VERTICAL?this.skinBar.x=this.maskRect.width-this.skinBar.width:this.type==i.HORIZONTAL&&(this.skinBar.y=this.maskRect.height-this.skinBar.height)},e.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=0),this.type=t,this.setSkinBarPos()},e.prototype.setSize=function(t,e){void 0===t&&(t=200),void 0===e&&(e=200),this.maskRect=s.getRect(t,e),this.addChild(this.maskRect),this.setMask(),this.setSkinBarPos()},Object.defineProperty(e.prototype,"target",{set:function(t){this._target=t,this.addChildAt(this._target,0),this.setMask()},enumerable:!0,configurable:!0}),e}(p);t.ScrollBar=b,__reflect(b.prototype,"moon.ScrollBar",["moon.ILayout"]);var T=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getCheckBox(t):e.label=t,this.addItem(e)},o.prototype.addItem=function(t){e.prototype.addItem.call(this,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(t)},o.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.removeFromParent(!0)},o.prototype.onClick=function(e){e.currentTarget;this.dispEvent(t.MoonEvent.CHANGE)},o.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=10);for(var o=0;o<this.items.length;o++){var n=this.items[o];t==i.VERTICAL?n.y=(n.height+e)*o:n.x=(n.width+e)*o}},Object.defineProperty(o.prototype,"selectIndexs",{get:function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e];1==i.currentPage&&t.push(e)}return t},enumerable:!0,configurable:!0}),o}(C);t.CheckBoxBar=T,__reflect(T.prototype,"moon.CheckBoxBar",["moon.ILayout"]);var E=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectIndex=0,t}return __extends(i,e),i.prototype.onClick=function(t){var e=t.currentTarget;this.selectItem(e)},i.prototype.selectItem=function(e){for(this.reset();this.hasItem(this.index);){var i=this.getNextItem();i.currentPage=0,i.setSkinNormal(),i.open()}e.close(),e.currentPage=1,e.setSkinNormal(),this._selectIndex=this.items.indexOf(e),this.dispEvent(t.MoonEvent.CHANGE,this._selectIndex)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){this._selectIndex=t,this.selectItem(this.getItem(t))},enumerable:!0,configurable:!0}),i}(T);t.TabbarBar=E,__reflect(E.prototype,"moon.TabbarBar");var S=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAutoLayout=!1,t}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getRodatioButton(t):e.label=t,this.addItem(e)},i.prototype.render=function(){this.update()},i.prototype.update=function(){var t;if(1==this.isAutoLayout)for(var e=0;e<this.items.length;e++)t=this.items[e],t.x=(t.width+10)*e},i.prototype.onClick=function(e){var i=e.currentTarget;this.selectIndex=this.items.indexOf(i),this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){function e(t){t.setSkinNormal()}this._selectIndex=t;var i=this.items[t];this.items.map(e,this),i.setSkinDown()},enumerable:!0,configurable:!0}),i}(T);t.RadioButtonBar=S,__reflect(S.prototype,"moon.RadioButtonBar");var B=function(t){function e(e){void 0===e&&(e="提示或警告");var i=t.call(this)||this;return i.bgColor=o.gray,i.text=(new v).textField,i.text.text=e,i}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.initView()},e.prototype.initView=function(){var t=(this.createBackground(0,.3),this.text.width),e=this.text.height,o=t+80,n=e+120,r=this.stageWidth-o>>1,s=this.stageHeight-n>>1;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:o,h:n,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.bg.x=r,this.bg.y=s,this.addChild(this.bg);var a=new y;a.label="确 定",this.bg.addChild(a),a.x=o-a.width>>1,a.y=this.text.y+e+40,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.text.x=r+(o-t>>1),this.text.y=s+20,this.addChild(this.text)},e.prototype.onClick=function(t){this.removeFromParent(!0),this.dispEvent(l.CLOSE)},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.bg=null,this.bgColor=null,this.text=null},e}(C);t.AlertBar=B,__reflect(B.prototype,"moon.AlertBar");var k=function(t){function e(e,i){void 0===e&&(e="提示或警告"),void 0===i&&(i=3);var o=t.call(this,e)||this;return o.time=i,o}return __extends(e,t),e.prototype.initView=function(){var t=this.text.width,e=this.text.height,o=t+20,n=e+20,r=this.stageWidth-o>>1,s=this.stageHeight-n>>1;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:o,h:n,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.bg.x=r,this.bg.y=s,this.addChild(this.bg),this.text.x=r+(o-t>>1),this.text.y=s+(n-e>>1),this.addChild(this.text),this.alpha=0;var a=this.y-50;Tween.get(this).to({alpha:1},500).wait(1e3*this.time).to({alpha:0,y:a},500).call(this.backCall,this)},e.prototype.backCall=function(){Tween.removeTweens(this),this.removeFromParent(!0),this.time=null,this.dispEvent(l.CLOSE)},e}(B);t.AlertAutoBar=k,__reflect(k.prototype,"moon.AlertAutoBar");var I=function(t){function e(e,i){void 0===e&&(e="提示或警告"),void 0===i&&(i=200);var o=t.call(this,e)||this;return o.bgWidth=i,o}return __extends(e,t),e.prototype.initView=function(){var t=this.text.width,e=this.text.height,o=this.bgWidth,n=e+20,r=this.stageWidth-o>>1,a=100;this.bg=new u,this.bg.type=i.SHAPE_RECT,this.bg.data={w:o,h:n,c:this.bgColor},this.bg.x=r,this.bg.y=a,this.addChild(this.bg);var h=s.getRect(o,n,0,r,a);this.bg.mask=h,this.text.x=o,this.text.y=10,this.bg.addChild(this.text);var c=2e3+100*this.text.text.length,l=-t;Tween.get(this.text).to({x:l},c).call(this.backCall,this)},e.prototype.backCall=function(){Tween.removeTweens(this),Tween.removeTweens(this.text),this.removeFromParent(!0),this.bgWidth=null,this.dispEvent(l.CLOSE)},e}(B);t.AlertRollBar=I,__reflect(I.prototype,"moon.AlertRollBar");var O=function(t){function e(e,i){void 0===e&&(e=100),void 0===i&&(i=50);var o=t.call(this)||this;return o.text=(new v).textField,o.inputW=e,o.inputH=i,o}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=this.inputW,o=this.inputH;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:e,h:o,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.addChild(this.bg);var n=5;this.text.x=n,this.text.y=n,this.text.width=e-2*n,this.text.height=o-2*n,this.text.type=egret.TextFieldType.INPUT,this.addChild(this.text)},e.prototype.setMultiline=function(){this.text.wordWrap=!0,this.text.multiline=!0,this.text.verticalAlign=egret.VerticalAlign.TOP},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxChars",{set:function(t){this.text.maxChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restrict",{set:function(t){this.text.restrict=t},enumerable:!0,configurable:!0}),e}(C);t.InputBar=O,__reflect(O.prototype,"moon.InputBar");var R=function(e){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=e.call(this)||this;return o.titleHeight=60,o.pWidth=t,o.pHeight=t,o.titleBg=new Sprite,o.containerBg=new Sprite,o.title=(new v).textField,o.container=new p,o}return __extends(i,e),i.prototype.render=function(){0==this.pWidth&&0==this.pWidth?e.prototype.render.call(this):(this.stageWidth=this.pWidth,this.stageHeight=this.pHeight),this.createRectBySprite(this.titleBg,this.stageWidth,this.titleHeight,t.Color.titleBackground),this.createRectBySprite(this.containerBg,this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.addChild(this.titleBg),this.addChild(this.containerBg),this.title.anchorOffsetX=this.title.textWidth>>1,this.title.anchorOffsetY=this.title.textHeight>>1,this.title.x=this.stageWidth>>1,this.title.y=this.titleHeight>>1,this.addChild(this.title),this.container.y=this.titleHeight,this.addChild(this.container),this.containerMask=this.createRect(this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.container.mask=this.containerMask,this.touchEnabled=!0,this.dispEvent(l.RENDER_COMPLETE)},i.prototype.addItem=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0),e.prototype.addItem.call(this,t),0!=i&&(t.x=i),0!=o&&(t.y=o),this.container.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&this.container.removeChild(t)},Object.defineProperty(i.prototype,"label",{get:function(){return this.title.text},set:function(t){this.title.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorTop",{set:function(t){var e=this.titleBg.width,i=this.titleBg.height;this.createRectBySprite(this.titleBg,e,i,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorBottom",{set:function(t){var e=this.containerBg.width,i=this.containerBg.height;this.createRectBySprite(this.containerBg,e,i,t,0,this.titleHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"windowRect",{get:function(){var t=new Rectangle(0,0,this.stageWidth,this.stageHeight);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this.titleHeight},enumerable:!0,configurable:!0}),i.prototype.removeAll=function(){this.container.dispose()},i}(C);t.PanelBar=R,__reflect(R.prototype,"moon.PanelBar");var M=function(e){function i(){var t=e.call(this)||this;return t.radioButton=new S,t.currentPage=0,t.posStartX=0,t.moveItems=[],t.container=new p,t.addChild(t.container),t.radioButton.isAutoLayout=!0,t}return __extends(i,e),i.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.close=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.update=function(){this.container.removeChildren();var e,i;if(this.items.length>0){var o=this.items[0];this.container.addChild(o),e=o.windowRect.width,i=o.windowRect.height,this.panelWidth=e}for(var n=this.items.length,r=0;n>r;r++){var s=new y(t.Skin.pointNormal,t.Skin.pointDown);this.radioButton.addItem(s)}s=this.radioButton.getItem(0),s.setSkinDown(),this.radioButton.x=e-22*n>>1,this.radioButton.y=i-20,this.addChild(this.radioButton)},i.prototype.render=function(){this.update(),this.items.length>1&&this.open()},i.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.posStartX=t.stageX,this.dispEvent(l.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.moveEnd(t.stageX)}},i.prototype.moveDo=function(t){var e=t-this.posStartX;if(Math.abs(e)>20){if(0==this.moveItems.length){var i=this.items[this.currentPage],o=this.panelWidth;this.moveItems.push(i),0==this.currentPage?(i=this.items[this.currentPage+1],this.container.addChild(i),i.x=o,this.moveItems.push(i)):this.currentPage==this.items.length-1?(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-o,this.moveItems.push(i)):(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-o,this.moveItems.push(i),i=this.items[this.currentPage+1],this.container.addChild(i),i.x=o,this.moveItems.push(i))}var n=0==this.currentPage&&e>0,r=this.currentPage==this.items.length-1&&0>e;n||r||(this.container.x=e)}},i.prototype.moveEnd=function(t){if(0==this.container.x)return void this.backCall(0);var e=t-this.posStartX,i=egret.Tween.get(this.container),o=this.panelWidth,n=this.panelWidth>>2;Math.abs(e)>n?(o=this.panelWidth,o*=e>0?1:-1):(e=0,o=0);var r=200;i.to({x:o},r),i.call(this.backCall,this,[e])},i.prototype.backCall=function(t){t>0?(this.currentPage--,this.currentPage=this.currentPage<0?0:this.currentPage):0>t&&(this.currentPage++,this.currentPage=this.currentPage==this.items.length?this.items.length-1:this.currentPage),this.container.removeChildren();var e=this.items[this.currentPage];e.x=0,this.container.addChild(e),this.radioButton.selectIndex=this.currentPage,this.moveItems.length=0,this.container.x=0,this.dispEvent(l.OVER)},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.close()},i}(C);t.PanelMoreManager=M,__reflect(M.prototype,"moon.PanelMoreManager",["moon.IOnoff"]);var P=function(){function t(){}return t.stageWidth=640,t.stageHeight=1136,t.version=i.VER_DEBUG,t.isMobile=egret.Capabilities.isMobile,t.gameId=1,t}();t.GameData=P,__reflect(P.prototype,"moon.GameData");var L=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=16362243,t}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.createBgGradientFill();var i=new Sprite;this.addChild(i);var o=this.stageWidth,n=this.stageHeight,r=80,a=s.getRoundRect(o-100,r,16573853,100,100);a.x=o-a.width>>1,a.y=n-a.height>>1,i.addChild(a);var h=s.getRect(o-120,r-10,this.color);h.x=o-h.width>>1,h.y=n-h.height>>1,i.addChild(h),this.proWidth=h.width;var c=s.getRoundRect(o-120,r-10,0,100,100);c.x=o-c.width>>1,c.y=n-c.height>>1,h.mask=c,this.progress=h;var l=new u;l.type=t.Const.SHAPE_CIRCLE,l.data={r:r/2,c:14781965},l.setBackground(16777215,5),this.addChild(l),l.x=a.x+a.width-r/2,l.y=a.y+r/2,this.txtLoadPos=new Point(l.x,l.y);var p=this.createText(0,0,"");p.size=40,p.textColor=11563776,this.txtLoad=p;var d=this.createText(0,0,"游戏加载");d.size=40,d.x=o-d.width>>1,d.y=a.y-2*d.height;var g=this.createText(0,0,"");g.size=40,this.txtName=g,this.updateName("敬请期待"),this.createAirFan(),this.airFan.x=l.x,this.airFan.y=l.y,this.createLogo(),this.update(0),this.play()},i.prototype.loop=function(t){return this.airFan.rotation+=3,!0},i.prototype.createAirFan=function(){this.airFan=new Sprite,this.addChild(this.airFan);for(var t=0;4>t;t++){var e=new Sprite;this.airFan.addChild(e),e.graphics.lineStyle(0),e.graphics.beginFill(16777215),e.graphics.cubicCurveTo(-29,-28,29,-28,0,0),e.graphics.endFill(),e.rotation=90*t}},i.prototype.createLogo=function(){var e=this.stageWidth,i=this.stageHeight,o=new u;o.type=t.Const.SHAPE_CIRCLE,o.data={r:50,c:14781965},o.setBackground(16777215,2),o.x=e>>1,o.y=o.height,this.addChild(o);var n=this.createText(0,0,"ZL");n.size=40,n.x=o.x-(n.width>>1),n.y=o.y-(n.height>>1)-15,n=this.createText(0,0,"game"),n.size=30,n.x=o.x-(n.width>>1),n.y=o.y-(n.height>>1)+15,this.addChild(t.MoonUI.getHeart(15,16777215)),n=this.createText(0,0,"子乐游戏"),n.size=40,n.textColor=14720801,n.x=e-n.width-10,n.y=i-n.height-10},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=16635225),void 0===e&&(e=14720801);var i=this.stageWidth,o=this.stageHeight,n=new egret.Matrix;n.createGradientBox(2*i,2*o,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.RADIAL,[t,e],[1,1],[0,255],n),r.graphics.drawRect(0,0,i,o),this.addChild(r),r},i.prototype.updateName=function(t){this.txtName.text=t,this.txtName.x=this.stageWidth-this.txtName.width>>1,this.txtName.y=this.stageHeight/2+2*this.txtName.height},i.prototype.update=function(t){if(!(t>1)){t>.99&&this.stop(),this.progress.scaleX=t;var e=this.txtLoad,i=this.txtLoadPos;e.text=Math.ceil(100*t)+"%",e.x=this.stageWidth-e.width>>1,e.y=i.y-e.height/2;var o=s.getCircle(5+5*Math.random(),this.color,i.x,i.y);o.y=10-20*Math.random(),this.addChildAt(o,2),Tween.get(o).to({x:-this.proWidth,alpha:0},1e3)}},i}(t.GameView);t.GameLoad=L,__reflect(L.prototype,"moon.GameLoad")}(moon||(moon={}));var BView=function(t){function e(){return t.call(this,0,0)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.canvasY=this.topHeight},e.prototype.createCloseBtn=function(){var t=new moon.BasicButton;t.label="关闭",this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(t){this.dispEvent(moon.MoonEvent.CLOSE),this.removeFromParent(!0)},e.prototype.createCanvas=function(){var t=this.createRect(this.stage.stageWidth,this.stage.stageHeight-this.canvasY,moon.Color.white);t.y=this.canvasY,this.addChild(t);var e=this.createRect(this.stage.stageWidth,this.stage.stageHeight-this.canvasY,moon.Color.white);e.y=this.canvasY,this.canvas=this.createRect(this.stage.stageWidth,this.stage.stageHeight,moon.Color.white),this.addChild(this.canvas),this.canvas.mask=e},e.prototype.createAlert=function(t){var e=new moon.AlertBar(t);e.addEvent(moon.MoonEvent.CLOSE,this.closeAlert,this),this.addChild(e)},e.prototype.closeAlert=function(t){},e.prototype.createTitle=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.addItem(new moon.Label(t,0),i,e)},e.prototype.getRandomArray=function(t){for(var e=[],i=t.concat();i.length>0;){var o=Math.floor(Math.random()*i.length);e.push(i.splice(o,1)[0])}return e},e}(moon.PanelBar);__reflect(BView.prototype,"BView");var MOON_FTP=24,moon;!function(t){var e=function(e){function i(t){void 0===t&&(t="");var i=e.call(this)||this;return""!=t&&(i.skinName=t,i.position=new Point,i.addBitmap(),i.bgWidth=i.width,i.bgHeight=i.height),i}return __extends(i,e),i.prototype.addBitmap=function(){RES.hasRes(this.skinName)?(this.skinImage=new t.Scale9Image(this.skinName),this.addChild(this.skinImage)):trace("找不到资源："+this.skinName)},i.prototype.setAnchorCenter=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1},i}(t.MoonContainer);t.Image=e,__reflect(e.prototype,"moon.Image");var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){this.hasItem(t)&&this.items.splice(t,1)},e.prototype.getItem=function(t){return this.items[t]},e.prototype.hasItem=function(t){return this.items.length>0&&t>=0&&t<this.items.length},e.prototype.getNextItem=function(){return this.items[this.index++]},Object.defineProperty(e.prototype,"itemsLength",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.index=0},e}(e);t.BasicContainer=i,__reflect(i.prototype,"moon.BasicContainer");var o=function(e){function i(t,i){void 0===i&&(i=1);var o=e.call(this)||this;o.skinName=t;for(var n=0;i>n;n++)o.items.push(o.getBitmap());return o}return __extends(i,e),i.prototype.getBitmap=function(){var e;return RES.hasRes(this.skinName)?(e=new t.Scale9Image(this.skinName),this.addChild(e)):trace("找不到资源："+this.skinName),e},i.prototype.layout=function(e,i){void 0===i&&(i=0),e==t.Const.VERTICAL?t.SimpleLayout.displayRank(this.items,1,i,i,0,0):e==t.Const.HORIZONTAL&&t.SimpleLayout.displayRank(this.items,this.items.length,i,i,0,0)},i.prototype.setMultiLine=function(e,i){void 0===i&&(i=0),t.SimpleLayout.displayRank(this.items,e,i,i,0,0)},i}(i);t.ImageChartlet=o,__reflect(o.prototype,"moon.ImageChartlet",["moon.ILayout"]);var n=function(e){function i(t,i){void 0===i&&(i=1);var o=e.call(this,t,i)||this;for(o.speed=4,o.head=o.items[0],o.addChild(o.head),o.reset();o.hasItem(o.index);){var n=o.getNextItem();n.alpha=(o.itemsLength-(o.index-1))/o.itemsLength}return egret.startTick(o.loop,o),o}return __extends(i,e),i.prototype.update=function(t,e){this.head.x+=t,this.head.y+=e},i.prototype.loop=function(e){var i=this.items.length-1,o=this.items[i];if(t.GameUtils.twoDistance(this.headItem,o)>.1)for(var n=this.speed,r=0;i>r;r++){var s=this.items[r],a=this.items[r+1];a.x+=(s.x-a.x)/n,a.y+=(s.y-a.y)/n}return!0},Object.defineProperty(i.prototype,"headItem",{get:function(){return this.head},enumerable:!0,configurable:!0}),i}(o);t.ImageFollow=n,__reflect(n.prototype,"moon.ImageFollow");var r=function(t){function e(e,i,o,n){void 0===e&&(e=""),void 0===n&&(n="png");var r=t.call(this)||this;r._ftp=MOON_FTP;for(var s=i;o>=s;s++)r.items.push(e+s+"_"+n);return r.skinName=r.getItem(0),r.addBitmap(),r.createTime(),r}return __extends(e,t),e.prototype.createTime=function(){null==this.timer&&(this.timer=new egret.Timer(1e3/this.ftp,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this))},e.prototype.onTimer=function(){this.hasItem(++this.index)?this.gotoAndStop(this.index):this.loop?(this.reset(),this.gotoAndStop(this.index)):this.timer.stop()},e.prototype.gotoAndStop=function(t){this.hasItem(t)?(this.index=t,this.skinName=this.getItem(t),this.update()):trace("gotoAndStop的参数请保持在0到"+this.items.length,"当前index="+t)},e.prototype.gotoAndPlay=function(t){this.index=t,this.play()},e.prototype.play=function(){this.timer.start()},e.prototype.stop=function(){this.timer.stop()},e.prototype.update=function(){RES.hasRes(this.skinName)?this.skinImage.texture=RES.getRes(this.skinName):trace("找不到资源："+this.skinName)},Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ftp",{get:function(){return this._ftp},set:function(t){this._ftp=t,this.removeTime(),this.createTime()},enumerable:!0,configurable:!0}),e.prototype.removeTime=function(){null!=this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer=null)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeTime()},e}(i);t.ImageAnimation=r,__reflect(r.prototype,"moon.ImageAnimation");var s=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setImage=function(t){this.image=t},t.prototype.setStageWH=function(t,e){this.tw=t,this.th=e},t.prototype.setTop=function(t){this.image.y=t},t.prototype.setBottom=function(t){this.image.y=this.th-this.image.height-t},t.prototype.setLeft=function(t){this.image.x=t},t.prototype.setRight=function(t){this.image.x=this.tw-this.image.width-t},t.prototype.setCenterX=function(t){void 0===t&&(t=0),this.image.x=(this.tw-this.image.width>>1)+t},t.prototype.setCenterY=function(t){void 0===t&&(t=0),this.image.y=(this.tw-this.image.width>>1)+t},t.prototype.setCenterXByPanent=function(t){t.parent instanceof e?t.x=t.parent.bgWidth-t.width>>1:t.x=t.parent.width-t.width>>1},t.prototype.setCenterYByPanent=function(t){t.parent instanceof e?t.y=t.parent.bgHeight-t.height>>1:t.y=t.parent.height-t.height>>1},t}();t.ImageLayout=s,__reflect(s.prototype,"moon.ImageLayout")}(moon||(moon={}));var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.Capabilities.isMobile?this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.addChild(new MainMoon)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var MainMoon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),moon.GameMoon.init(this.stage),this.createBackground(16763904);var e=["基础组件","组件Progress","组件ScrollBar","游戏2048界面","画画","选色游戏","别踩白块","消灭星星界面","游戏背包"];e.push("组件输入框","城市背景","游戏模版","动画模版","提示模块","跟随模块");for(var i=0;i<e.length;i++){var o=new moon.BasicButton(moon.MoonUI.getRoundRect(300,60,moon.Color.black),moon.MoonUI.getRoundRect(300,60,moon.Color.gray));o.skinAutoScale=!1,o.label=e[i],o.name=i.toString(),o.x=this.stageWidth-o.width>>1,o.y=i*(o.height+10),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this),this.addChild(o)}this.father=this.parent},e.prototype.click=function(t){var e=t.currentTarget;this.removeFromParent();var i;switch(parseInt(e.name)){case 0:i=new MoonTest;break;case 1:i=new TestProgress;break;case 2:i=new TestScrollBar;break;case 3:i=new G2048;break;case 4:i=new Draw;break;case 5:i=new GameSelectColor;break;case 6:i=new DonotTouchWhiteRect;break;case 7:i=new DestoryStar;break;case 8:i=new GameBackpack;break;case 9:i=new TextInput;break;case 10:i=new HouseMapTest;break;case 11:i=new GameTest;break;case 12:i=new GameAnimation;break;case 13:i=new GameAlert;break;case 14:i=new GameImageFollow}this.father.addChild(i),i.addEvent(moon.MoonEvent.CLOSE,this.onClose,this)},e.prototype.onClose=function(t){this.father.addChild(this)},e}(moon.BasicView);__reflect(MainMoon.prototype,"MainMoon");var Button=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicButton);__reflect(Button.prototype,"Button");var GameTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="游戏模版",t.prototype.render.call(this),this.colorBottom=10066329,this.createCloseBtn(),this.createView()},e.prototype.createView=function(){this.addItem(new moon.BasicGamePanel)},e}(BView);__reflect(GameTest.prototype,"GameTest");var GameAnimation=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="动画模版",t.prototype.render.call(this),this.colorBottom=13421772,this.createCloseBtn(),this.createView()},e.prototype.createView=function(){var t=new moon.ImageChartlet("wallMin_jpg",40);t.setMultiLine(4),this.addItem(t);var e=new moon.ImageAnimation("body",1,13);e.loop=!0,e.ftp=6,e.play(),this.addItem(e,100,100),this.body=e,this.addItem(new moon.Label("控制速度",16777215),100,10);var i=new moon.SliderBar;i.value=0,this.addItem(i,50,50),i.addEvent(moon.MoonEvent.OVER,this.onSlider,this)},e.prototype.onSlider=function(t){var e=t.currentTarget;this.body.ftp=6+54*e.value,this.body.play()},e}(BView);__reflect(GameAnimation.prototype,"GameAnimation");var GameAlert=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="提示模版",t.prototype.render.call(this),this.colorBottom=16764108,this.createCloseBtn(),this.createView()},e.prototype.createView=function(){this.setButton("提示自动关闭",100,100),this.setButton("提示手动关闭",100,200),this.setButton("提示滚动关闭",100,300)},e.prototype.setButton=function(t,e,i){var o=new Button;o.label=t,this.addItem(o,e,i),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(t){var e=t.currentTarget;switch(e.label){case"提示自动关闭":alertAuto("只显示2秒然后自动关闭",2);break;case"提示手动关闭":alertHand("这是一个需要手动\n关闭的提示框");break;case"提示滚动关闭":alertRoll("恭喜子乐获得了99级神器")}},e}(BView);__reflect(GameAlert.prototype,"GameAlert");var GameImageFollow=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vx=1,e.vy=1,e.vs=5,e}return __extends(e,t),e.prototype.render=function(){this.label="图像残影跟随模版",t.prototype.render.call(this),this.colorBottom=16764108,this.createCloseBtn(),this.createView(),egret.startTick(this.loop,this)},e.prototype.createView=function(){this.image=new moon.ImageFollow("tips_png",10),this.addChild(this.image)},e.prototype.loop=function(t){return this.image.update(this.vx*this.vs,this.vy*this.vs),this.image.headItem.y>this.stageHeight?this.vy=-1:this.image.headItem.y<0&&(this.vy=1),this.image.headItem.x>this.stageWidth?this.vx=-1:this.image.headItem.x<0&&(this.vx=1),!0},e}(BView);__reflect(GameImageFollow.prototype,"GameImageFollow");var TestProgress=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试Progress",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.progressBar=new moon.ProgressBar,this.addChild(this.progressBar),this.progressBar.x=this.progressBar.y=100,egret.startTick(this.loop,this)},e.prototype.loop=function(){this.progressBar.value+=.002,this.progressBar.value=this.progressBar.value>=1?0:this.progressBar.value;var t=Math.round(100*this.progressBar.value)+"%";return this.progressBar.showText(t),!1},e.prototype.displose=function(){egret.stopTick(this.loop,this),t.prototype.dispose.call(this)},e}(BView);__reflect(TestProgress.prototype,"TestProgress");var TestScrollBar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试ScrollBar",t.prototype.render.call(this),this.colorBottom=4473924,this.createCloseBtn();var e=new moon.ScrollBar,i=new moon.Scale9Image("bg_jpg");e.target=i,e.setSize(400,400),e.layout(moon.Const.VERTICAL),this.addChild(e),e.x=e.y=100;var e=new moon.ScrollBar,i=new moon.Scale9Image("bg_jpg");
e.target=i,e.setSize(400,400),e.layout(moon.Const.HORIZONTAL),this.addChild(e),e.x=100,e.y=550},e}(BView);__reflect(TestScrollBar.prototype,"TestScrollBar");var G2048=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试2048界面",t.prototype.render.call(this),this.colorBottom=16775406,this.createCloseBtn();var e=this.stageWidth-20,i=this.stageWidth-e>>1,o=this.stageHeight-e-i,n=this.createRoundRect(12430237,e,e);n.x=i,n.y=o,e=200,n=this.createRoundRect(15516672,e,e),n.x=i,n.y=this.stageHeight-e-3.3*e,this.createTextBySprite("2048",n,90),e=150;var r=n.y;n=this.createRoundRect(12364959,e+40,e),n.x=240,n.y=r,this.createTextBySprite("当前分:99",n,30),n=this.createRoundRect(12364959,e+40,e),n.x=440,n.y=r,this.createTextBySprite("最高分:999",n,30);var s=[15721947,15589835,15774589,15437395,15696232,16208945,16177005],a=[2,4,8,16,32,64,128];e=(this.stageWidth-60)/4;for(var h=[],c=0;16>c;c++){var l=Math.floor(Math.random()*s.length),u=s[l];n=this.createRoundRect(u,e,e),h.push(n),this.createTextBySprite(a[l],n)}moon.SimpleLayout.displayRank(h,4,5,5,20,o+10)},e.prototype.createRoundRect=function(t,e,i){var o=moon.MoonUI.getRoundRect(e,i,t,10,10);return this.addChild(o),o},e.prototype.createTextBySprite=function(t,e,i){void 0===i&&(i=80);var o=new moon.Label(t),n=o.textField;n.size=i,n.x=e.width-n.width>>1,n.y=e.height-n.height>>1,e.addChild(n)},e}(BView);__reflect(G2048.prototype,"G2048");var Draw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prevColor=0,e.color=0,e.size=1,e}return __extends(e,t),e.prototype.render=function(){this.label="测试画图",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.canvasY=300,this.createColors(),this.createCanvas(),this.createButtons(),this.createSliderBar(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.createButtons=function(){var t=["铅笔","橡皮","清空"],e=new moon.TabbarBar;this.addChild(e),e.x=380,e.y=220;for(var i=0;i<t.length;i++){var o=[moon.Skin.buttonNormal,moon.Skin.buttonDown,moon.Skin.buttonDown,moon.Skin.buttonDown],n=new moon.MoreSkinButton(o);n.label=t[i],e.addItem(n)}e.layout(moon.Const.HORIZONTAL),e.selectIndex=0,e.addEvent(moon.MoonEvent.CHANGE,this.change,this)},e.prototype.change=function(t){var e=t.currentTarget;switch(e.selectIndex){case 0:this.color=this.prevColor;break;case 1:this.color=moon.Color.white;break;case 2:this.canvas.graphics.clear(),this.color=this.prevColor,e.selectIndex=0}},e.prototype.createSliderBar=function(){var t=new moon.SliderBar;t.value=0,this.addChild(t),t.x=40,t.y=250,t.addEvent(moon.MoonEvent.MOVE,this.changeSize,this)},e.prototype.changeSize=function(t){var e=t.currentTarget;this.size=99*e.value+1},e.prototype.createColors=function(){for(var t=20,e=[],i=40,o=0;t>o;o++){var n=new moon.MoonDisplayObject;n.type=moon.Const.SHAPE_RECT_ROUND,n.data={w:i,h:i,c:moon.Color.random,ew:10,eh:10},n.setBackground(0,5),this.addChild(n),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onColor,this),e.push(n)}moon.SimpleLayout.displayRank(e,10,5,5,20,80),this.select=this.createCircle(5,moon.Color.white),this.addChild(this.select),this.selectColor(e[0])},e.prototype.onColor=function(t){var e=t.currentTarget;this.selectColor(e)},e.prototype.selectColor=function(t){this.color=t.color,this.prevColor=t.color,this.select.x=t.x+10,this.select.y=t.y+10},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.posStart=new egret.Point(t.stageX,t.stageY),this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.posMove=new egret.Point(t.stageX,t.stageY),this.controlMove();break;case egret.TouchEvent.TOUCH_END:this.controlEnd()}},e.prototype.controlStart=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.canvas.graphics.lineStyle(this.size,this.color),this.canvas.graphics.moveTo(this.posStart.x,this.posStart.y),this.canvas.graphics.lineTo(this.posStart.x,this.posStart.y)},e.prototype.controlMove=function(){this.canvas.graphics.lineTo(this.posMove.x,this.posMove.y)},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.dispose=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),t.prototype.dispose.call(this)},e}(BView);__reflect(Draw.prototype,"Draw");var GameSelectColor=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=0,e.total=4,e.level=2,e.value=100,e}return __extends(e,t),e.prototype.render=function(){this.label="选色游戏",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.createLevel()},e.prototype.createColors=function(){for(var t=this.total,e=[],i=Math.sqrt(t),o=(this.stageWidth-100)/i,n=moon.Color.random,r=Math.floor(Math.random()*t),s=moon.Color.lightenDarkenColor(n,this.value),a=0;t>a;a++){var h=new moon.MoonDisplayObject;h.type=moon.Const.SHAPE_RECT_ROUND,h.data={w:o,h:o,c:a==r?s:n,ew:10,eh:10},h.setBackground(0,1),this.addItem(h),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onColor,this),h.name=""+a,e.push(h)}var c=this.stageWidth-(o+5)*i>>1;moon.SimpleLayout.displayRank(e,i,5,5,c,200),this.select=r},e.prototype.onColor=function(t){var e=t.currentTarget;e.name==this.select.toString()&&this.createLevel()},e.prototype.createLevel=function(){for(this.total=this.level*this.level,this.value-=2,this.reset();this.hasItem(this.index);){var t=this.getItem(this.index);t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onColor,this),this.removeItem(t)}this.createColors(),this.level++,this.level>7&&(this.level=7)},e}(BView);__reflect(GameSelectColor.prototype,"GameSelectColor");var DonotTouchWhiteRect=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=0,e.level=2,e.value=100,e.rects=[],e}return __extends(e,t),e.prototype.render=function(){this.label="别踩白块",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.createCanvas(),this.createLevel()},e.prototype.play=function(){egret.startTick(this.loop,this)},e.prototype.stop=function(){egret.stopTick(this.loop,this)},e.prototype.createLevel=function(){for(var t=6,e=0;t>e;e++){var i=this.createSprite();this.canvas.addChild(i),this.rects.push(i)}var o=this.stageHeight-t*this.rectHeight;moon.SimpleLayout.displayRank(this.rects,1,0,0,0,o)},e.prototype.createSprite=function(){var t=4,e=new Sprite,i=this.stageWidth/t,o=1.5*i,n=Math.floor(Math.random()*t),r=moon.Color.white,s=moon.Color.black;this.rectHeight=o;for(var a=0;t>a;a++){var h=new moon.MoonDisplayObject;h.type=moon.Const.SHAPE_RECT,h.data={w:i,h:o,c:a==n?s:r},h.setBackground(moon.Color.gray,1),h.name=a==n?"1":"0",h.touchEnabled=!0,h.x=a*i,h.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),e.addChild(h)}return e},e.prototype.onClick=function(t){var e=t.currentTarget;if("1"==e.name){this.play();for(var i=this.rects.length,o=0;i>o;o++){var n=this.rects[o];n.y+this.rectHeight}}else this.createAlert("   游戏结束\n点击确定可继续")},e.prototype.loop=function(t){for(var e=this.rects.length,i=0;e>i;i++){var o=this.rects[i];if(o.y+=20,o.y>=this.stageHeight){this.stop(),this.randomSeat(o);var n=this.rects[0].y-this.rectHeight;o.y=n,this.rects.pop(),this.rects.unshift(o)}}return!0},e.prototype.randomSeat=function(t){for(var e=[],i=0;4>i;i++)e.push(t.getChildAt(i));e=this.getRandomArray(e),moon.SimpleLayout.displayRank(e,4)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.stop()},e}(BView);__reflect(DonotTouchWhiteRect.prototype,"DonotTouchWhiteRect");var DestoryStar=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=0,e.value=100,e}return __extends(e,t),e.prototype.render=function(){this.label="消灭星星界面",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.createLevel()},e.prototype.createLevel=function(){for(var t,e=104,i=[],o=8,n=(this.stageWidth-16)/o,r=moon.Color.getRandomArray(3),s=0;e>s;s++){t=r[Math.floor(Math.random()*r.length)];var a=new moon.MoonDisplayObject;a.type=moon.Const.SHAPE_RECT,a.data={w:n,h:n,c:t,ew:10,eh:10},a.setBackground(0,1),this.addItem(a),i.push(a)}moon.SimpleLayout.displayRank(i,o,0,0)},e}(BView);__reflect(DestoryStar.prototype,"DestoryStar");var GameBackpack=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="游戏背包",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.createBackpack()},e.prototype.createBackpack=function(){var t=["装备","材料","消耗品","时装"],e=new moon.TabbarBar;this.addItem(e,60,100);for(var i=0;i<t.length;i++){var o=this.getSkins(),n=new moon.MoreSkinButton(o);n.labelColor=5251584,n.skinAutoScale=!1,n.label=t[i],e.addItem(n)}e.selectIndex=0,e.layout(moon.Const.HORIZONTAL,1);var r=this.stageWidth-100,s=this.stageHeight-300,a=14991524,h=13211497,c=new moon.MoonDisplayObject;c.type=moon.Const.SHAPE_RECT_ROUND,c.data={w:r,h:s,c:a,ew:20,eh:20},c.setBackground(h,3),this.addItem(c,50,150);var l=[];for(r=90,i=0;35>i;i++){var a=13409657,h=13211497,c=new moon.MoonDisplayObject;c.type=moon.Const.SHAPE_RECT_ROUND,c.data={w:r,h:r,c:a,ew:15,eh:15},c.setBackground(h,5),this.addItem(c),l.push(c)}moon.SimpleLayout.displayRank(l,5,5,5,63,170);var t=["1","2","3","4"],e=new moon.TabbarBar;this.addItem(e,80,920);for(var i=0;i<t.length;i++){var o=this.getCircleSkins(),n=new moon.MoreSkinButton(o);n.labelColor=5251584,n.skinAutoScale=!1,n.label=t[i],e.addItem(n)}e.selectIndex=0,e.layout(moon.Const.HORIZONTAL,1)},e.prototype.getSkins=function(){for(var t=[],e=14128485,i=16762446,o=5251584,n=0;4>n;n++){var r=new moon.MoonDisplayObject;r.type=moon.Const.SHAPE_RECT_ROUND,r.data={w:120,h:60,c:0==n?e:i,ew:10,eh:10},r.setBackground(o,3),t.push(r)}return t},e.prototype.getCircleSkins=function(){for(var t=[],e=14128485,i=16762446,o=5251584,n=0;4>n;n++){var r=new moon.MoonDisplayObject;r.type=moon.Const.SHAPE_CIRCLE,r.data={r:20,c:0==n?e:i},r.anchorOffsetX=r.anchorOffsetY=-25,r.setBackground(o,3),t.push(r)}return t},e}(BView);__reflect(GameBackpack.prototype,"GameBackpack");var TextInput=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="输入框测试",t.prototype.render.call(this),this.colorBottom=10092441,this.createCloseBtn(),this.createView()},e.prototype.createView=function(){this.createTitle("单行自由输入",5);var t=new moon.InputBar(this.stageWidth,50);this.addChild(t),t.y=100,this.createTitle("单行只能输入十个字",105),t=new moon.InputBar(this.stageWidth,50),this.addChild(t),t.maxChars=10,t.y=200,this.createTitle("单行只能输入数字与字母",205),t=new moon.InputBar(this.stageWidth,50),this.addChild(t),t.y=300,t.color=3355443,t.restrict="a-zA-Z0-9",this.createTitle("多行自由输入",305);var t=new moon.InputBar(this.stageWidth,300);this.addChild(t),t.setMultiline(),t.y=400},e}(BView);__reflect(TextInput.prototype,"TextInput");var HouseMapTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="城市背景地图",t.prototype.render.call(this),this.colorBottom=10066329,this.createCloseBtn(),this.createView()},e.prototype.createView=function(){var t=new egret.Rectangle(0,0,this.stageWidth,this.stageHeight),e=new egret.Rectangle(10,200,20,200),i=new MapHorizontalHouse(t,e,0);this.addChild(i);var t=new egret.Rectangle(0,0,this.stageWidth,this.stageHeight),e=new egret.Rectangle(10,100,40,100),i=new MapHorizontalHouse(t,e);this.addChild(i)},e}(BView);__reflect(HouseMapTest.prototype,"HouseMapTest");var MapHorizontalHouse=function(t){function e(e,i,o){void 0===o&&(o=-1);var n=t.call(this)||this;return n.rect=e,n.house=i,n.color=o,n}return __extends(e,t),e.prototype.render=function(){var t=this.house,e=moon.MoonUI.getRect(this.rect.width,this.rect.height);e.alpha=.1,this.addChild(e);for(var i=this.rect.width/t.width,o=0,n=0;i>n;n++){var r=-1==this.color?16777215*Math.random():this.color,s=t.width+Math.random()*t.x,a=t.height+Math.random()*t.y,h=moon.MoonUI.getRect(s,a,r);this.addChild(h),h.y=this.rect.height-h.height,h.x=o,o=h.x+h.width}},e}(moon.MoonContainer);__reflect(MapHorizontalHouse.prototype,"MapHorizontalHouse");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var MButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicButton);__reflect(MButton.prototype,"MButton");var MImage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Image);__reflect(MImage.prototype,"MImage");var ImageAnimation=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageAnimation);__reflect(ImageAnimation.prototype,"ImageAnimation");var Layout=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageLayout);__reflect(Layout.prototype,"Layout");var Scale9Image=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Scale9Image);__reflect(Scale9Image.prototype,"Scale9Image");var MoonEvent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.MoonEvent);__reflect(MoonEvent.prototype,"MoonEvent");var GameData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.GameData);__reflect(GameData.prototype,"GameData");var Const=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Const);__reflect(Const.prototype,"Const");var moon;!function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return __extends(r,e),r.prototype.render=function(){e.prototype.render.call(this),this.initView()},r.prototype.initView=function(){this.createBgGradientFill(),this.txtScore=this.createText(),this.txtLevel=this.createText(200),this.txtBlood=this.createText(400),this.panelSet=new n,this.panelSet.setBtnPos(4,200),this.panelSet.addEvent(t.MoonEvent.PAUSE,this.onSetHandler,this),this.panelSet.addEvent(t.MoonEvent.PLAY,this.onSetHandler,this),this.panelSet.addEvent(t.MoonEvent.CHANGE,this.onSetHandler,this),this.addChild(this.panelSet),this.panelStart=new i,this.panelStart.addEvent(t.MoonEvent.START,this.start,this),this.addChild(this.panelStart),this.panelOver=new o,this.panelOver.addEvent(t.MoonEvent.START,this.start,this),this.initGame()},r.prototype.initGame=function(){this.level=1,this.score=0,this.blood=200,this.updateBlood(),this.updateLevel(),this.updateScore()},r.prototype.start=function(t){this.initGame(),this.play()},r.prototype.loop=function(t){return this.blood--,this.score+=10,this.updateScore(),this.updateBlood(),!0},r.prototype.over=function(){this.addChild(this.panelOver),this.panelOver.alpha=0,Tween.get(this.panelOver).to({alpha:1},300),this.panelOver.update({score:this.score,level:this.level}),this.stop()},r.prototype.updateLevel=function(){this.txtLevel.text="level:"+this.level},r.prototype.updateScore=function(){this.txtScore.text="score:"+this.score,this.score>0&&this.score%200==0&&(this.level++,this.updateLevel())},r.prototype.updateBlood=function(){this.txtBlood.text="blood:"+this.blood,0==this.blood&&this.over()},r.prototype.onSetHandler=function(e){if(e.type==t.MoonEvent.PAUSE)this.stop();else if(e.type==t.MoonEvent.PLAY)this.play();else{e.data;(e.dataType="soundBg")||(e.dataType="soundEffect")}},r.prototype.createImageBg=function(t){this.addChild(new MImage(t))},r.prototype.dispose=function(){this.stop(),e.prototype.dispose.call(this)},r}(t.GameView);t.BasicGamePanel=e,__reflect(e.prototype,"moon.BasicGamePanel");var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var t=this.createBackground();t.alpha=.5,this.createBtn("开始游戏"),this.createTitle("游戏标题")},i.prototype.createBtn=function(t){var e=this.createButton(t);return e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),e.x=this.stageWidth-e.width>>1,e.y=this.stageHeight-e.height>>1,e},i.prototype.createTitle=function(t){var e=this.createText(0,0,t);return e.x=(this.stageWidth-e.width)/2,e.y=(this.stageHeight-e.height)/2-100,e},i.prototype.onClick=function(e){this.dispEvent(t.MoonEvent.START),Tween.get(this).to({alpha:0},300).call(this.backCall,this)},i.prototype.backCall=function(t){this.removeFromParent()},i.prototype.createImageBg=function(t){this.addChild(new MImage(t))},i}(t.GameView);t.BasicGameStart=i,__reflect(i.prototype,"moon.BasicGameStart");var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initView=function(){this.btnClose=this.createBtn("再来一次"),this.btnRank=this.createBtn("排行榜"),this.btnRank.y+=100,this.txtScore=this.createText(),this.txtLevel=this.createText(),this.rankPanel=new r},i.prototype.update=function(t){this.txtScore.text="score:"+t.score,this.txtLevel.text="level:"+t.level,this.txtScore.x=(this.stageWidth-this.txtScore.width)/2,this.txtLevel.x=(this.stageWidth-this.txtLevel.width)/2,this.txtScore.y=(this.stageHeight-this.txtScore.height)/2-60,this.txtLevel.y=this.txtScore.y-60},i.prototype.onClick=function(i){var o=i.currentTarget;o==this.btnClose?e.prototype.onClick.call(this,i):o==this.btnRank&&this.rankPanel&&t.GameData.stage.addChild(this.rankPanel)},i}(i);t.BasicGameOver=o,__reflect(o.prototype,"moon.BasicGameOver");var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var e=this.getSkin();this.btnSet=new MButton(e,this.getSkin()),this.btnSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(this.btnSet),this.btnSetPos&&(this.btnSet.x=this.btnSetPos.x,this.btnSet.y=this.btnSetPos.y),this.container=new Sprite;var i=this.createBackground(0,.5);this.container.addChild(i);var o=new t.MoonDisplayObject,n=this.stageWidth>>1,r=16750848;o.type=t.Const.SHAPE_RECT_ROUND,o.data={w:1.1*n,h:n,ew:100,eh:100,c:r},o.setBackground(16777215,5),o.x=i.width-n>>1,o.y=i.height-n>>1,this.container.addChild(o);var s=new t.Label("背景音乐",16777215),a=new t.Label("游戏音效",16777215);s.textField.size=40,a.textField.size=40,s.x=a.x=50,s.y=50,a.y=150,o.addChild(s),o.addChild(a);var h=this.getToggleSwitch();h.x=s.x+s.width+10,h.y=s.y-5,o.addChild(h),this.btnSoundBg=h;var h=this.getToggleSwitch();h.x=a.x+a.width+10,h.y=a.y-5,o.addChild(h),this.btnSoundEffect=h;var c=new MButton;c.label="关  闭",c.x=o.width-c.width>>1,c.y=240,c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),o.addChild(c),this.btnClose=c},i.prototype.setBtnPos=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.btnSetPos=new Point(t,e)},i.prototype.getSkin=function(){var e=16750848,i=6963200,o=new Sprite,n=90,r=new t.MoonDisplayObject;r.type=t.Const.SHAPE_RECT_ROUND,r.data={w:n,h:n,ew:30,eh:30,c:e},r.anchorOffsetX=r.anchorOffsetY=n>>1,o.addChild(r),o.addChild(t.MoonUI.getCircle(30,i));for(var s=8,a=360/s,h=0;s>h;h++){var c=t.MoonUI.getRect(15,80,i);c.anchorOffsetX=c.width>>1,c.anchorOffsetY=c.height>>1,c.rotation=a*h,o.addChild(c)}return o.addChild(t.MoonUI.getCircle(20,e)),o.addChild(t.MoonUI.getCircle(6,i)),o.anchorOffsetX=o.anchorOffsetY=-(n/2+4),o},i.prototype.getToggleSwitch=function(){var e=t.Skin.switchOn,i=t.Skin.switchOn,o=t.MoonUI.getSwitch(t.Color.bule,t.Color.white),n=t.MoonUI.getSwitch(t.Color.red,t.Color.white),r=new t.MoreSkinButton([e,i,o,n]);return r.toggleSwitch=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),r},i.prototype.onClick=function(e){var o,n=e.currentTarget;n==this.btnSet?(this.addChild(this.container),this.setValue(),this.dispEvent(t.MoonEvent.PAUSE)):n==this.btnSoundBg?(o=this.btnSoundBg.currentPage,alertAuto("背景音乐"+(1==o?"开":"关"),1),a.localWrite(i.SOUND_BG,o.toString()),this.dispEvent(t.MoonEvent.CHANGE,this.btnSoundBg.currentPage,"soundBg")):n==this.btnSoundEffect?(o=this.btnSoundEffect.currentPage,alertAuto("游戏音效"+(1==o?"开":"关"),1),a.localWrite(i.SOUND_EFFECT,o.toString()),this.dispEvent(t.MoonEvent.CHANGE,this.btnSoundEffect.currentPage,"soundEffect")):n==this.btnClose&&(this.removeChild(this.container),this.dispEvent(t.MoonEvent.PLAY))},i.prototype.setValue=function(){var t=a.localRead(i.SOUND_BG)||"1";this.btnSoundBg.updatePage(parseInt(t));var t=a.localRead(i.SOUND_EFFECT)||"1";this.btnSoundEffect.updatePage(parseInt(t))},i.SOUND_BG="sound bg",i.SOUND_EFFECT="sound effect",i}(t.BasicView);t.BasicGameSet=n,__reflect(n.prototype,"moon.BasicGameSet");var r=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.max=50,t}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){this.createBackground(0,.5);var e=t.MoonUI.getRect(this.stageWidth-100,this.stageHeight-200,0);e.alpha=.8,this.addChild(e),Layout.getIns().setCenterXByPanent(e),Layout.getIns().setCenterYByPanent(e);var i=new Rectangle(e.x,e.y,e.width,e.height),o=60,n=new Sprite;n.graphics.lineStyle(2,16777215),n.graphics.moveTo(i.x,i.y+o),n.graphics.lineTo(i.x,i.y),n.graphics.lineTo(i.right,i.y),n.graphics.lineTo(i.right,i.bottom),n.graphics.lineTo(i.x,i.bottom),n.graphics.lineTo(i.x,i.y+o),n.graphics.lineTo(i.right,i.y+o),this.addChild(n);var r=30,a=t.MoonUI.getCircle(r,16777215),h=t.MoonUI.getX(r>>1,r>>1,65280,4);h.anchorOffsetX=h.anchorOffsetY=r>>2,a.addChild(h);var c=new MButton(a,a);c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(c),c.x=e.x+e.width,c.y=e.y;var l=this.createText(0,0,"分数排行榜");Layout.getIns().setCenterXByPanent(l),l.y=e.y+(o-l.height)/2,this.addChild(l);var l=this.createText(e.x,e.y+o);this.addChild(l),this.txtRank=l,this.conatiner=new Sprite,this.addChild(this.conatiner);for(var u=e.width-2,p=0;p<this.max;p++){var d=new s(u,p);this.conatiner.addChild(d),this.items.push(d)}t.SimpleLayout.displayRank(this.items,1);var g=new t.ScrollBar;g.target=this.conatiner,g.setSize(i.width,i.height-o-2),g.layout(t.Const.VERTICAL),this.addChild(g),g.x=i.x+1,g.y=i.y+o+2},i.prototype.onClick=function(t){this.removeFromParent()},i.prototype.update=function(t){for(var e=51,i=0;e>i;i++)if(i<this.max){var o=this.items[i];o.txtScore.text="100"}},i}(t.BasicView);t.BasicGameRank=r,__reflect(r.prototype,"moon.BasicGameRank");var s=function(t){function e(e,i){var o=t.call(this)||this;return o.colors=[0,14516795,13805662,14668132],o.w=e,o.rank=i+1,o.initView(),o}return __extends(e,t),e.prototype.initView=function(){var t=this.createRect(this.w,80,0);t.alpha=this.rank%2==0?.6:.1,this.addChild(t),this.txtRank=this.createText(100,0),this.txtScore=this.createText(400,0),this.rank<=3&&(this.txtRank.textColor=this.txtScore.textColor=this.colors[this.rank]),this.txtRank.text=String(this.rank),this.txtScore.text=String(0),Layout.getIns().setCenterYByPanent(this.txtRank),Layout.getIns().setCenterYByPanent(this.txtScore)},e}(t.BasicView);t.RankItem=s,__reflect(s.prototype,"moon.RankItem");var a=function(){function e(){}return e.getGameIdKey=function(e){return t.GameData.gameId+e},e.localWrite=function(t,e){egret.localStorage.setItem(this.getGameIdKey(t),e)},e.localRead=function(t){return egret.localStorage.getItem(this.getGameIdKey(t))},e.localRemove=function(t){egret.localStorage.removeItem(this.getGameIdKey(t))},e.localClear=function(){egret.localStorage.clear()},e.serverWrite=function(){},e.serverRead=function(){return""},e.serverRemove=function(){},e}();t.BasicGameStorage=a,__reflect(a.prototype,"moon.BasicGameStorage");var h=function(){function e(){}return e.init=function(e){egret.Capabilities.isMobile?e.scaleMode=egret.StageScaleMode.FIXED_WIDTH:e.scaleMode=egret.StageScaleMode.SHOW_ALL,t.GameData.stageWidth=e.stageWidth,t.GameData.stageHeight=e.stageHeight,t.GameData.stage=e,t.TipsManager.getIns().init(e),t.LogManager.getIns().init(e),t.AlertManager.getIns().init(e)},e}();t.GameMoon=h,__reflect(h.prototype,"moon.GameMoon");var c=function(){function t(){}return t.getTimeFormatByNum=function(t,e,i){void 0===e&&(e=":"),void 0===i&&(i=3);var o,n,r;return 1==i?r=this.numberFormat(t):2==i?(n=this.numberFormat(t/60),r=this.numberFormat(t%60),n+e+r):(o=this.numberFormat(t/60/60>>0),n=this.numberFormat(t/60%60),r=this.numberFormat(t%60),o+e+n+e+r)},t.numberFormat=function(t){return t=Math.floor(t),t>=10?""+t:"0"+t},t.twoDistance=function(t,e){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)},t}();t.GameUtils=c,__reflect(c.prototype,"moon.GameUtils")}(moon||(moon={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.gameLoad=new moon.GameLoad,this.addChild(this.gameLoad)},e.prototype.onProgress=function(t,e){this.gameLoad.update(t/e)},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var MoonTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.panelMore=new moon.PanelMoreManager;var t=[];t.push("moon组件一，基本按钮展示"),t.push("moon组件二，进度条与滑动器展示"),t.push("moon组件三，TIPS展示"),t.push("moon组件四， MoonDisplay展示"),t.push("moon组件五， Tabbar展示");for(var e=0;e<t.length;e++){var i=new moon.PanelBar;i.label=t[e],i.addEvent(moon.MoonEvent.RENDER_COMPLETE,this.onAddStage.bind(this)),this.panelMore.addItem(i)}this.panelMore.addEvent(moon.MoonEvent.START,this.start,this),this.panelMore.addEvent(moon.MoonEvent.OVER,this.over,this),this.addChild(this.panelMore),this.showButton(0),this.showProgresBar(1),this.showTipsBar(2),this.showMoonDisplay(3),this.showTabbar(4),this.createCloseBtn()},e.prototype.createCloseBtn=function(){var t=new moon.BasicButton;t.label="关闭",this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(t){this.dispEvent(moon.MoonEvent.CLOSE),this.removeFromParent(!0)},e.prototype.addToStageMore=function(t){this.panelMore.close()},e.prototype.start=function(t){},e.prototype.over=function(t){},e.prototype.onAddStage=function(t){var e=t.currentTarget;e.colorBottom=16572284},e.prototype.showButton=function(t){function e(t){moon.TipsManager.getIns().simpleTips("选择了"+d.selectIndex,new Point(150,550))}function i(t){moon.TipsManager.getIns().simpleTips("选择了"+f.selectIndexs,new Point(300,550))}var o=this.panelMore.getItem(t),n=new moon.BasicButton;n.label="默认皮肤按钮",o.addItem(n,10,10);var r=moon.Skin.randomRect,s=moon.Skin.randomRect,n=new moon.BasicButton(r,s);n.label="随机颜色皮肤按钮",o.addItem(n,10,90);var r=moon.Skin.randomCircle,s=moon.Skin.randomCircle,n=new moon.BasicButton(r,s);n.labelCircle="圆按钮",o.addItem(n,100,220);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png"),n=new moon.BasicButton(a,h);n.label="外部加载的皮肤",o.addItem(n,300,100);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png");a.width=h.width=280,a.height=h.height=100;var n=new moon.BasicButton(a,h);n.skinAutoScale=!1,n.label="外部加载的皮肤",o.addItem(n,300,200);var r=moon.Skin.switchOn,s=moon.Skin.switchOn,c=moon.Skin.switchOff,l=moon.Skin.switchOff,u=new moon.MoreSkinButton([r,s,c,l]);u.toggleSwitch=!0,o.addItem(new moon.Label("toggleSwitch按钮",0),10,300),o.addItem(u,10,340);for(var p=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],d=new moon.RadioButtonBar,g=0;g<p.length;g++)d.addItemLabel(p[g]);d.layout(),o.addItem(new moon.Label("单选框按钮",0),10,500),o.addItem(d,10,540),d.addEvent(moon.MoonEvent.CHANGE,e.bind(this));for(var p=["A","B","C","D"],m=new moon.RadioButtonBar,g=0;g<p.length;g++)m.addItemLabel(p[g]);m.layout(moon.Const.HORIZONTAL,10),o.addItem(new moon.Label("单选框按钮横排版",0),10,800),o.addItem(m,10,840);for(var p=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],f=new moon.CheckBoxBar,v=p.length,g=0;v>g;g++)f.addItemLabel(p[g]);f.layout(),o.addItem(new moon.Label("复选框按钮",0),300,500),o.addItem(f,300,540),f.addEvent(moon.MoonEvent.CHANGE,i,this)},e.prototype.showProgresBar=function(t){function e(t){t.type==moon.MoonEvent.START?this.panelMore.close():t.type==moon.MoonEvent.MOVE||this.panelMore.open()}var i=this.panelMore.getItem(t),o=new moon.ProgressBar;o.value=.5,i.addItem(o,50,300);var n=Math.round(100*o.value)+"%";o.showText(n,-1,-40);var r=400,s=30,a=moon.MoonUI.getRect(r,s,moon.Color.random),h=moon.MoonUI.getRect(r,s,moon.Color.random),o=new moon.ProgressBar(a,h);i.addItem(o,100,50),o.value=.8;var n=Math.round(100*o.value)+"%";o.showText(n);var c=new moon.SliderBar;i.addItem(c,300,500),c.value=.2,c.addEvent(moon.MoonEvent.START,e,this),c.addEvent(moon.MoonEvent.MOVE,e,this),c.addEvent(moon.MoonEvent.OVER,e,this);var c=new moon.SliderBar;i.addItem(c,50,650),c.layout(moon.Const.VERTICAL),c.value=.2},e.prototype.showTipsBar=function(t){function e(t){var e=t.currentTarget;moon.TipsManager.getIns().simpleTips(e.label,new Point(t.stageX,t.stageY))}var i=this.panelMore.getItem(t),o=2,n=400,r=500;i.addItem(new moon.Label("单击按钮显示TIPS，TIPS显示始终都在屏幕内",0),10,100);for(var s=0;6>s;s++){var a=new moon.BasicButton;a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),a.label="单击显示TIPS"+s;var h=Math.floor(s%o)*n,c=Math.floor(s/o)*r;i.addItem(a,h,c)}},e.prototype.showMoonDisplay=function(t){var e=this.panelMore.getItem(t),i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT,i.data={w:100,h:100,c:moon.Color.random},e.addItem(i,100,100);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT_ROUND,i.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(i,100,300);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_CIRCLE,i.data={r:50,c:moon.Color.random},e.addItem(i,100,600);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT,i.data={w:100,h:100,c:moon.Color.random},e.addItem(i,300,100),i.setBackground(moon.Color.random,10);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT_ROUND,i.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(i,300,300),i.setBackground(moon.Color.random,10);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_CIRCLE,i.data={r:50,c:moon.Color.random},e.addItem(i,300,600),i.setBackground(moon.Color.random,10)},e.prototype.showTabbar=function(t){var e=this.panelMore.getItem(t),i=["标题1","标题2","标题3","标题4","标题5"],o=new moon.TabbarBar;e.addItem(o,100,100);for(var n=0;n<i.length;n++){var r=[moon.Skin.buttonNormal,moon.Skin.buttonDown,moon.Skin.buttonDown,moon.Skin.buttonDown],s=new moon.MoreSkinButton(r);s.label=i[n],o.addItem(s)}o.selectIndex=0,o.layout(moon.Const.HORIZONTAL,10);var i=["标题一","标题二","标题三","标题四","标题五"],o=new moon.TabbarBar;e.addItem(o,100,300);for(var n=0;n<i.length;n++){var r=[moon.Skin.buttonNormal,moon.Skin.buttonDown,moon.Skin.buttonDown,moon.Skin.buttonDown],s=new moon.MoreSkinButton(r);s.label=i[n],o.addItem(s)}o.layout(moon.Const.VERTICAL,10)},e}(moon.MoonContainer);__reflect(MoonTest.prototype,"MoonTest");